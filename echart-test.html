<style>
    .opggtalk-btn {
        width: 70px;
        height: 25px;
        background-size: cover;
    }

    .opggtalk-text {
        background-color: #0b000a40;
        color: white;
        text-align: center;
        padding-top: 1px;
        font-size: 10px;
    }
</style>
<div style="width: 300px;height: 250px;">
    <div id="opggContents" style="width: 300px; height: 30px; background-color: #101010">
        <table>
            <tr>
                <td>
                    <div className="opggtalk-btn"
                         style=" background-image: url('https://talk.op.gg/images/game/bg_lol.jpg');">
                        <div className="opggtalk-btn opggtalk-text"
                             onClick="window.open('https://talk.op.gg/s/lol/all?sort=popular', 'window_name', 'width=1000, height=800, location=no, status=no, scrollbars=yes');">
                            리그오브<br>레전드
                        </div>
                    </div>
                </td>
                <td>
                    <div className="opggtalk-btn"
                         style="background-image: url('https://talk.op.gg/images/game/bg_pubg.jpg');">
                        <div className="opggtalk-btn opggtalk-text"
                             onClick="window.open('https://talk.op.gg/s/pubg/all?sort=popular', 'window_name', 'width=1000, height=800, location=no, status=no, scrollbars=yes');">
                            배틀그라운드
                        </div>
                    </div>
                </td>
                <td>
                    <div className="opggtalk-btn"
                         style="background-image: url('https://talk.op.gg/images/game/bg_ow.jpg');">
                        <div className="opggtalk-btn opggtalk-text"
                             onClick="window.open('https://talk.op.gg/s/ow/all?sort=popular', 'window_name', 'width=1000, height=800, location=no, status=no, scrollbars=yes');">
                            오버워치
                        </div>
                    </div>
                </td>
                <td>
                    <div className="opggtalk-btn"
                         style="background-image: url('https://talk.op.gg/images/game/bg_r6.jpg');">
                        <div className="opggtalk-btn opggtalk-text"
                             onClick="window.open('https://talk.op.gg/s/r6/all?sort=popular', 'window_name', 'width=1000, height=800, location=no, status=no, scrollbars=yes');">
                            레인보우<br>식스시즈
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="gamArea" name='Gam360_mfresh'
         style="text-align:center;width: 300px; height: 220px;background-color: black">
        <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
        <script>
            var isLazyLoad = 'N';
            var isRefresh = 'Y';

            var countLimit = isRefresh === 'Y' ? 4 : 1;
            var lazyLoad_fetchMarginPercent = 20;
            var lazyLoad_renderMarginPercent = 10;
            var intervelTime = 120; // refresh 주기 (초)
            var isCheckViewablity = true; // 뷰어빌리티 체크 안할경우 false 로 변경
            var view = 0;
            var gamTime = 0;
            var count = 0;
            var isIntersectionObserverSet = false;
            var timer = 0;
            // var isViewable = false;
            var noAdCnt = 0;
            var isFirstReq = true;
            var adoptagdfp = "ZXZhbChmdW5jdGlvbihwLGEsYyxrLGUsZCl7ZT1mdW5jdGlvbihjKXtyZXR1cm4oYzxhPycnOmUocGFyc2VJbnQoYy9hKSkpKygoYz1jJWEpPjM1P1N0cmluZy5mcm9tQ2hhckNvZGUoYysyOSk6Yy50b1N0cmluZygzNikpfTtpZighJycucmVwbGFjZSgvXi8sU3RyaW5nKSl7d2hpbGUoYy0tKXtkW2UoYyldPWtbY118fGUoYyl9az1bZnVuY3Rpb24oZSl7cmV0dXJuIGRbZV19XTtlPWZ1bmN0aW9uKCl7cmV0dXJuJ1xcdysnfTtjPTF9O3doaWxlKGMtLSl7aWYoa1tjXSl7cD1wLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxiJytlKGMpKydcXGInLCdnJyksa1tjXSl9fXJldHVybiBwfSgnNCA1PTV8fHt9OzUubD01Lmx8fFtdOzQgbT1tfHxDKGMsZCxnLGIpezQgZj0hMCxoPSIvL0IuRi5vL3EvIitiLGU9IkgiK2kuQSh5KmkuRCgpKSsxOy0xIT1iLkcoIi8vIikmJihmPSExKTs0IGE9My5FKCJ4Iik7YS4yKCJ3IixlKTthLjIoInAiLCJuIik7YS4yKCJyIiwwKTthLjIoInMiLDApO2EuMigidiIsMCk7YS4yKCJ1IiwwKTthLjIoInQiLDApO2EuMigieiIsZCk7YS4yKCJaIixnKTthLjIoIlgiLCJJIik7ZD0iPDkgaz1cJyIraCsiXCc+Vi85PiI7aihjPTMuNihjKSl7VShjLjIoIlkiLCJXIik7Yy5TKCk7KWMuTShjLlQpO2MuTChhKX1LIDggNztqKCJKIj09Yik4IDc7Zj8oYT0zLjYoZSksYj1hLk58fGEuTy4zLDchPWImJihiLlIoKSxiLlEoZCksYi5QKCkpKTooYT0zLjYoZSksYS5rPWIpfTsnLDYyLDYyLCd8fHNldEF0dHJpYnV0ZXxkb2N1bWVudHx2YXJ8Z29vZ2xldGFnfGdldEVsZW1lbnRCeUlkfG51bGx8cmV0dXJufHNjcmlwdHx8fHx8fHx8fE1hdGh8aWZ8c3JjfGNtZHxhZG9wQURzaG93fG5vbmV8Y2N8Ym9yZGVyfFJFfGZyYW1lQm9yZGVyfG1hcmdpbldpZHRofHBhZGRpbmdIZWlnaHR8cGFkZGluZ1dpZHRofG1hcmdpbkhlaWdodHxpZHxJRlJBTUV8MUU0fHdpZHRofGZsb29yfGNvbXBhc3N8ZnVuY3Rpb258cmFuZG9tfGNyZWF0ZUVsZW1lbnR8YWRvcHxpbmRleE9mfGFkb3BCfG5vfEFET1BfUEJVfGVsc2V8YXBwZW5kQ2hpbGR8cmVtb3ZlQ2hpbGR8Y29udGVudERvY3VtZW50fGNvbnRlbnRXaW5kb3d8Y2xvc2V8d3JpdGV8b3BlbnxoYXNDaGlsZE5vZGVzfGZpcnN0Q2hpbGR8Zm9yfDx8YWRzYnlhZG9wX3xzY3JvbGxpbmd8Y2xhc3N8aGVpZ2h0Jy5zcGxpdCgnfCcpLDAse30pKTs="
            eval(atob(adoptagdfp));
        </script>
        <script>
            var adopAdunitList = ['enl_opgg_rt_300x250-230526-test1', 'enl_opgg_rt_300x250-230509-test2', 'enl_opgg_rt_300x250-230612-test3'];
            const ramdomNumber = Math.random();
            let unitName = '';
            if (ramdomNumber > 0.66) {
                unitName = adopAdunitList[0];
            } else if ( ramdomNumber > 0.33) {
                unitName = adopAdunitList[1];
            }else{
                unitName = adopAdunitList[2];
            }
            // unitName = 'enl_opgg_rt_300x250-230509-test';
            console.log(unitName);

            googletag.cmd.push(function () {
                googletag.defineSlot('/5932629,114726905/ca-pub-1474238860523410-tag/' + unitName, [[300, 250], [300, 200], [200, 200], [300, 150], [300, 100], [300, 50], [180, 150]], 'div-apt-ad-tZjyjPzFtm').addService(googletag.pubads());
                if (isLazyLoad && isLazyLoad === 'Y') {
                    googletag.pubads().enableLazyLoad({
                        fetchMarginPercent: lazyLoad_fetchMarginPercent,
                        renderMarginPercent: lazyLoad_renderMarginPercent,
                        mobileScaling: 1.0
                    });
                }
                googletag.pubads().addEventListener('slotRequested', function (event) {
                    console.log('g REQ');

                    try {
                        if (!isIntersectionObserverSet) {
                            isIntersectionObserverSet = true;
                            timer = setInterval(gamTimeTracker, 1000);
                        }
                    } catch (e) {
                        console.log('ERROR : Can not use IntersectionObserver ', e);
                    }
                });
                googletag.pubads().addEventListener('slotOnload', function (event) {
                    console.log('g IMP');
                });
                googletag.pubads().enableSingleRequest();
                googletag.pubads().set("page_url", "talk.op.gg");
                googletag.pubads().addEventListener('slotRenderEnded', function (event) {
                    count++;
                    if (event.isEmpty) noAdCnt++;
                    if (event.isEmpty && isFirstReq == true) {
                        isFirstReq = false;
                        console.log('360 pb');
                        document.getElementById('gamArea').style.backgroundColor = 'white';
                        adopADshow('div-apt-ad-tZjyjPzFtm', 300, 250, '45f0371c-0418-48bf-a589-909e5a146187');
                        document.getElementById('opggContents').style.display = 'none';
                    } else {
                        isFirstReq = false;
                        //console.log('gam 광고 있음');
                    }
                });
                googletag.pubads().addEventListener('slotVisibilityChanged', function (adopSlot) {
                    view = adopSlot.inViewPercentage;
                    console.log('slotVisibilityChanged view=', view);
                });
                googletag.enableServices();
            });
            var gamTimeTracker = function () {
                gamTime++;
                if (count >= countLimit || noAdCnt >= 2) {
                    clearInterval(timer);
                    return;
                }
                if (gamTime >= intervelTime) {
                    if (isCheckViewablity) {
                        if (view > 20) {
                            gamRefresh();
                        }
                    } else {
                        gamRefresh();
                    }
                }
            }

            function gamRefresh() {
                gamTime = 0;
                if (count >= countLimit) {
                    clearInterval(timer);
                    return;
                }
                googletag.pubads().refresh();
            }
        </script>
        <!-- /5932629,114726905/ca-pub-1474238860523410-tag/enl_opgg_rt_300x250-230307-test -->
        <div id='div-apt-ad-tZjyjPzFtm'>
            <script>
                googletag.cmd.push(function () {
                    googletag.display('div-apt-ad-tZjyjPzFtm');
                });
            </script>
        </div>
    </div>
</div>